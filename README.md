# Avalanche Statistics Analysis Tool

Python tool for analyzing energy and stress avalanche distributions from crystal plasticity simulations with logarithmic binning and truncated power-law fitting.

## Features

- Logarithmic binning for power-law distributions
- Fits data to truncated power law: `P(x) = A · x^(-ε) · exp(-λx)`
- Flexible filtering (plasticity events, alpha range, event size)
- Log-space fitting for numerical stability
- Exports plots, binned data, and fit parameters

## Requirements
```bash
pip install numpy scipy matplotlib
```

## Input Format

CSV file (`energy_stress_log.csv`) with columns:
```
Iteration,Alpha,PreEnergy,PreStress,PostEnergy,PostStress,EnergyChange,StressChange,Plasticity
```

Generated by C++ logging function from MTM simulations.

## Usage

### Quick Start
```bash
python avalanche_analysis.py
```

### Configuration

Edit the top of the script:
```python
FILTER_BY_PLASTICITY = False  # Only plastic events (flag=1)
FILTER_BY_ALPHA = True        # Filter by loading parameter
ALPHA_MIN = 0.0
ALPHA_MAX = 0.1

FILTER_BY_XMIN = True         # Minimum event size
ENERGY_XMIN = 1e-6
STRESS_XMIN = 1e-6

FILTER_BY_XMAX = True         # Maximum event size
ENERGY_XMAX = 1e-2
STRESS_XMAX = 1e-2

FIT_DATA = True
FIT_METHOD = 'logspace'       # 'logspace', 'weighted', or 'both'
nbin = 14                     # Number of bins
```

## Output Files

- `energy_stress_distributions_log10[suffix].png` - Plots with fits
- `data_histogram_energy[suffix].dat` - Energy distribution (log10 scale)
- `data_histogram_stress[suffix].dat` - Stress distribution (log10 scale)
- `fit_parameters[suffix].txt` - Fitted parameters with uncertainties

Format of `.dat` files: `log10(x), log10(P(x))`

## Fitting Parameters

The truncated power law `P(x) = A · x^(-ε) · exp(-λx)` yields:
- **ε (epsilon)**: Power-law exponent (typically 1-3 for avalanches)
- **λ (lambda)**: Exponential cutoff (→0 for pure power law)
- **A**: Normalization constant

## Tips

- Use `FIT_METHOD = 'logspace'` (recommended for power-law data)
- Choose xmin/xmax to exclude noisy small events and rare large events
- Use 14-20 bins for typical datasets
- Verify fits visually - red line should match data trend

## Citation
```bibtex
@software{avalanche_analysis,
  author = {Oguz Umut},
  title = {Avalanche Statistics Analysis Tool},
  year = {2024},
  url = {https://github.com/[your-username]/[repo-name]}
}
```

## License

MIT License - see LICENSE file for details

## Contact

Open an issue on GitHub or contact [your email]
```

And here's the `LICENSE` file to add to your repository:
```
MIT License

Copyright (c) 2024 Oguz Umut

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
